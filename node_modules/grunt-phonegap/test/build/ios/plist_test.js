(function() {
  var grunt, helpers, path, xmlParser, _;

  _ = require('lodash');

  grunt = require('grunt');

  xmlParser = require('xml2json');

  path = require('path');

  helpers = require(path.join(__dirname, '..', '..', '..', 'tasks', 'helpers'))(grunt);

  if (helpers.canBuild('ios')) {
    exports.phonegap = {
      'plist file should contain white status bar configuration': function(test) {
        var appName, plist, xml;
        test.expect(2);
        appName = grunt.config.get('phonegap.config.name');
        xml = grunt.file.read("test/phonegap/platforms/ios/" + appName + "/" + appName + "-Info.plist");
        plist = xmlParser.toJson(xml, {
          object: true
        });
        test.equal(true, _.contains(plist.plist.dict.key, "UIStatusBarStyle"), "contains key UIStatusBarStyle");
        test.equal(true, _.contains(plist.plist.dict.key, "UIViewControllerBasedStatusBarAppearance"), "contains key UIViewControllerBasedStatusBarAppearance");
        return test.done();
      }
    };
  }

}).call(this);
